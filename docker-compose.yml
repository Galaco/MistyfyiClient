version: '3'

services:
  app:
    build:
      dockerfile: ./Dockerfile
      context: .
    volumes:
      - ./public:/srv/app/maptracker/public
      - ./src:/srv/app/maptracker/src
      - ./types:/srv/app/maptracker/types
      - ./.env.dev:/srv/app/maptracker/.env
      - ./babel.config.js:/srv/app/maptracker/babel.config.js
      - ./postcss.config.js:/srv/app/maptracker/postcss.config.js
      - ./tsconfig.json:/srv/app/maptracker/tsconfig.json
      - ./tslint.json:/srv/app/maptracker/tslint.json
    ports:
      - 8080:8080
    environment:
      - CHOKIDAR_USEPOLLING=true

  nats:
    image: nats-streaming:0.11.2
    restart: on-failure
